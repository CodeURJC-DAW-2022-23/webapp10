{{>USR_AdminHeader}}

<!-- Begin Page Content -->
<div class="container-fluid">

  <!-- Content Row -->
  <div class="row">
      <form action="/deleteWorker" method="post">
        <div id="demo">
          <h1>Worker Table</h1>
          <!-- Table starts here -->
          <table id="table" class="table table-hover table-mc-light-blue">
            <thead>
            <tr>
              <th>Name</th>
              <th>Surname</th>
              <th>Email</th>
            </tr>
            </thead>
            <tbody>
            {{#list}}
            <tr>
              <td>{{name}}</td>
              <td>{{surname}}</td>
              <td>{{email}}</td>
              <td><input type="checkbox" name="id" value="{{id}}"></td>
            </tr>
            {{/list}}
            </tbody>
          </table>
          <div class="row" style="justify-content:center; text-align: center;">
            <input class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm" type="submit"
                   value="Delete">
          </div>
          <div>
            <button class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm" type="button" id="loadMore">
              Load More
              <i class="" id="spinner"></i>
            </button>
          </div>
        </div>
      </form>
</div>
  </div>
<!-- /.container-fluid -->
<!-- Nav Item - Utilities Collapse Menu -->
<li class="nav-item">
  <a class="nav-link collapsed" href="/addWorker" style="text-align:center">
    <div class="row" style="justify-content:center; text-align: center;">
      <input class="d-none d-sm-inline-block btn btn-sm btn-primary shadow-sm" type="submit"
             value="Add Worker">
    </div>
  </a>
</li>
</div>
<!-- End of Main Content -->

{{>USR_AdminFooter}}

<script src="js/vendor/jquery/jquery.min.js"></script>
<script src="js/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script>
 var contPage = 1;
    $( "#loadMore" ).click(function() {
        $.ajax({
            url: "/tablesClient/page/" + contPage,
            method: "get",
            beforeSend: ()=>{
                $("#spinner").addClass("fd-none d-sm-inline-block btn btn-sm btn-primary shadow-sm");
            }
        }).done(function (answer) {
            $("tr").last().after(answer);
            contPage += 1;
            $("#spinner").removeClass("fd-none d-sm-inline-block btn btn-sm btn-primary shadow-sm   ");
            if(contPage === {{last}}){
                $("#loadMore").off("click");
                $("#loadMore").remove();
            }
        });
    });
</script>

<!-- Core plugin JavaScript-->
<script src="js/vendor/jquery-easing/jquery.easing.min.js"></script>

<!-- Custom scripts for all pages-->
<script src="js/sb-admin-2.min.js"></script>

<!-- Page level plugins -->
<script src="js/vendor/chart.js/Chart.min.js"></script>

<!-- Page level custom scripts -->
<script src="js/demo/chart-area-demo.js"></script>
<script src="js/demo/chart-pie-demo.js"></script>
<script src="js/demo/chart-bar-demo.js"></script>

</body>

</html>